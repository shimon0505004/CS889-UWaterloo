<!DOCTYPE html>
<html>
<head>
<title>VD1: Hello, D3</title>
<style>
    body{font-family: Arial;}

    .tab{
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /*Style the buttons inside the tab*/
    .tab button{
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    .tab button:hover{
        background-color: #ddd;
    }

    .tab button:active{
        background-color: #ccc;
    }

    .tabcontent{
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    .topright:hover{
        color: red;
    }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
</head>
<body>


<h1>CS889 - Spring 2022, University of Waterloo</h1>
<h2>VD1: Hello, D3: Arefin Shimon, Shaikh Shawon (20942174)</h2>

<div class="tab">
    <button class="tablinks" onclick="openTab(event, 'Visualization')" id="defaultOpen">Visualization</button>
    <button class="tablinks" onclick="openTab(event, 'Readme')">Readme</button>
</div>

<div id="Visualization" class="tabcontent">
    <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
    <h3>VD1: Hello, D3</h3>

    <script>
        d3.csv("income_evaluation.csv", function(data) {
            //Filter Data
            var filteredData = data.filter(function(d){
                if(d["native_country"]== "Canada" 
                    && d["sex"]== "Male"
                    && (d["marital_status"]== "Never-married" || d["marital_status"]== "Divorced" || d["marital_status"]== "Separated")                    
                    ){
                    return d;
                }
            });

            // Variables
            var body = d3.select('#Visualization')
            var margin = { top: 50, right: 50, bottom: 50, left: 150 }
            var h = 1000 - margin.top - margin.bottom
            var w = 1000 - margin.left - margin.right
            // Scales
            var colorScale = d3.scale.category20()
            var xScale = d3.scale.linear()
                .domain([0,100])
                .range([0,w])
            var yScale = d3.scale.linear()
                .domain([0,17])
                .range([h,0])
            // SVG
            var svg1 = body.append('svg')
                .attr('height',h + margin.top + margin.bottom)
                .attr('width',w + margin.left + margin.right)
                .append('g')
                .attr('transform','translate(' + margin.left + ',' + margin.top + ')')
            // X-axis
            var xAxis = d3.svg.axis()
            .scale(xScale)
            .ticks(25)
            .orient('bottom')
            // Y-axis
            var yAxis = d3.svg.axis()
            .scale(yScale)
            .ticks(10)
            .orient('left')
    
            // Circles
            var circles = svg1.selectAll('circle')
                .data(filteredData)
                .enter()
                .append('circle')
                .attr('cx',function (d) { return xScale(d.age) })
                .attr('cy',function (d) { return yScale(d.education_num) })
                .attr('r',function (d) { return (d.hours_per_week/2) })
                .attr('stroke','black')
                .attr('stroke-width',1)
                .attr('fill',function (d,i) { return colorScale(i) })
                .on('mouseover', function () {
                    d3.select(this)
                    .transition()
                    .duration(500)
                    .attr('stroke-width',3)
                })
                .on('mouseout', function () {
                    d3.select(this)
                    .transition()
                    .duration(500)
                    .attr('stroke-width',1)
                })
                .append('title') // Tooltip
                .text(function (d) { return 'Occupation : '+ d.occupation +
                                    '\n Education : ' + d.education +
                                    '\n Race : ' + d.race +
                                    '\n Working Hours Per Week : ' + d.hours_per_week
                                })
            // X-axis
            svg1.append('g')
                .attr('class','axis')
                .attr('transform', 'translate(0,' + h + ')')
                .call(xAxis)
                .append('text') // X-axis Label
                .attr('class','label')
                .attr('y',-20)
                .attr('x',w)
                .attr('dy','.71em')
                .style('text-anchor','end')
                .text('Age')
            // Y-axis
            svg1.append('g')
                .attr('class', 'axis')
                .call(yAxis)
                .append('text') // y-axis Label
                .attr('class','label')
                .attr('transform','rotate(-90)')
                .attr('x',0)
                .attr('y',5)
                .attr('dy','.71em')
                .style('text-anchor','end')
                .text('Education Level Number')
        });
    </script>
</div>

<div id="Readme" class="tabcontent">
    <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
    <h3>ReadMe</h3>
    <p>
        <table>
            <tr>
                <th>Info</th>
                <th></th>
                <th>Details</th>
            </tr>
            <tr>
                <td>Name</th>
                <td>:</th>
                <td>Arefin Shimon, Shaikh Shawon</th>
            </tr>
            <tr>
                <td>Student ID</td>
                <td>:</th>
                <td>20942174</td>
            </tr>
            <tr>
                <td>WatIAM ID</td>
                <td>:</th>
                <td>ssarefin</td>
            </tr>
            <tr>
                <td>Email</td>
                <td>:</th>
                <td>ssarefin@uwaterloo.ca</td>
            </tr>
            <tr>
                <td>Website</td>
                <td>:</th>
                <td>www.shawonarefin.com</td>
            </tr>
        </table>
    </p>
</div>


<script>
    function openTab(evt, tabname){
        var i, tabcontent, tablinks;

        //Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent")
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        //Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        //Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabname).style.display = "block"
        evt.currentTarget.className += " active"
    }

    document.getElementById("defaultOpen").click()
</script>

</body>
</html>